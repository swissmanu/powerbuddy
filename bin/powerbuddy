#!/usr/bin/env node

var program = require('commander')
	, packageJson = require('../package.json')
	, powerbuddy = require('../');

program
	.version(packageJson.version);

program
	.command('list')
	.description('show scheduled starts and shutdowns')
	.action(function() {
		console.log('list');
	})
	.on('--help', function() {
		console.log('  Examples:');
		console.log('');
		console.log('    $ powerbuddy list');
		console.log('');
	});


program
	.command('schedule <day>')
	.description('schedule a start/shutdown pair')
	.option('-s, --start <time>', 'start')
	.option('-d, --shutdown <time>', 'shutdown')
	.action(function(day, options) {
		if(!options.start || !options.shutdown) {
			console.log('--start and/or --shutdown options missing.');
			return;
		}

		var parsedDay = powerbuddy.parser.parseDay(day)
			, parsedStart = powerbuddy.parser.parseTime(options.start)
			, parsedShutdown = powerbuddy.parser.parseTime(options.shutdown);

		console.log(parsedDay, parsedStart.toString(), parsedShutdown.toString());
	})
	.on('--help', function() {
		console.log('  Examples:');
		console.log('');
		console.log('    $ powerbuddy schedule monday -s 10am -d 22pm');
		console.log('    $ powerbuddy schedule friday,monday -s 10am -d 22pm');
		console.log('    $ powerbuddy schedule everyday -s 10am -d 22pm');
		console.log('    $ powerbuddy schedule weekend -s 10am -d 22pm');
		console.log('    $ powerbuddy schedule weekday,sunday -s 10am -d 22pm');
		console.log('');
	});

program.parse(process.argv);