#!/usr/bin/env node

var program = require('commander')
	, packageJson = require('../package.json')
	, powerbuddy = require('../');

program
	.version(packageJson.version);

program
	.command('list')
	.description('show scheduled starts and shutdowns')
	.action(function() {
		console.log('list');
	})
	.on('--help', function() {
		console.log('  Examples:');
		console.log('');
		console.log('    $ powerbuddy list');
		console.log('');
	});


program
	.command('plan <day>')
	.description('plan a start/shutdown pair')
	.option('-s, --start <time>', 'start')
	.option('-d, --shutdown <time>', 'shutdown')
	.action(function(day, options) {
		if(!options.start || !options.shutdown) {
			console.log('--start and/or --shutdown options missing.');
			return;
		}

		var parsedDay = powerbuddy.parser.parseDay(day)
			, parsedStart = powerbuddy.parser.parseTime(options.start)
			, parsedShutdown = powerbuddy.parser.parseTime(options.shutdown);

		console.log(parsedDay, parsedStart.toString(), parsedShutdown.toString());
	})
	.on('--help', function() {
		console.log('  Examples:');
		console.log('');
		console.log('    $ powerbuddy plan monday 10:00 22:00');
		console.log('    $ powerbuddy plan friday,monday 10:00 22:00');
		console.log('');
	});

/*
		console.log('    $ powerbuddy start weekend 10:00');
		console.log('    $ powerbuddy shutdown weekday 00:00');
		*/

	/*
	.option('plan <days> <start> <shutdown>', 'plan a start/shutdown pair for several days', list)
	.option('start <day> <time>', 'plan start')
	.option('start <days> <time>', 'plan start for several days', list)
	.option('shutdown <day> <time>', 'plan shutdown')
	.option('shutdown <days> <time>', 'plan shutdown for several days', list)
	.option('delete <id>', 'delete scheduled start/shutdown by id (retreive with `list`)')
	*/

program.parse(process.argv);